<!DOCTYPE html>

<html>

<head>
	<title>My News Feed</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script>



	function reload()
	{

		elem = $("#news");
		output = "";
		var storeddates = localStorage["string"];
		var dates = [];
		temp="";
		var count = 0;
		for(i = 9; i < storeddates.length; i++)	{
			if (storeddates[i] != "."){
				temp = temp+ storeddates[i];
				console.log("temp is " + temp);
			}
			else{
				dates.push(temp);
				temp = "";
				count = count + 1;
				
			}
	}		
			for (i = count-1; i >= 0; i--){
			console.log("DATES FROM STROAGE" + dates[i]+ " I " + i);
				output = output + "<p>" + localStorage[dates[i]] + "</p>\n";
			}

		elem.html(output);
	}
	
	function store()
	{	
		date = Date.now();
		console.log(date + " DATE ");
		text = date+ " - " +$("#msg").val();
	
		localStorage[date] = text;
console.log(date + "LOC STOR");
		localStorage["string"] = localStorage["string"]+ JSON.stringify(date)+ ".";
		reload();
	}

	
	</script>
</head>

<body >
	<h1>My News Feed</h1>
	<h3>My news update: <input id="msg" type="text" onchange="store()" name="msg" size="30" /></h3>
	<div id="news">News...</div>
</body>
</html>
